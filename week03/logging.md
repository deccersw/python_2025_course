# Доклад: Логирование в Python

## Введение
Модуль **`logging`** в Python — стандартный инструмент для ведения журналов работы программы. Он используется для записи сообщений о состоянии системы, ошибках, отладочной информации и событий. В отличие от `print()`, позволяет гибко управлять:
- уровнями важности сообщений;
- форматами;
- выводом в разные места (файлы, консоль, сеть);
- структурой логирования по модулям.

---

## Уровни логирования и их значения

| Уровень     | Числовое значение | Назначение |
|-------------|-------------------|------------|
| DEBUG       | 10                | Отладочная информация |
| INFO        | 20                | Информация о нормальной работе |
| WARNING     | 30                | Предупреждения |
| ERROR       | 40                | Ошибки |
| CRITICAL    | 50                | Критические ошибки |

По умолчанию используется уровень `WARNING`.

---

## Базовая настройка логирования

```python
import logging

logging.basicConfig(
    level=logging.INFO, # - указываем уровень информации, начиная с которого, будут записываться информация
    filename='app.log',
    format='%(asctime)s %(levelname)s %(name)s: %(message)s',
)

logging.info("Программа запущена")
logging.warning("Предупреждение")
logging.error("Ошибка")
```

Особенность: если вызвать `basicConfig()` - базовые настройки сохранятся 1 раз, внезависимости от кол-ва вызовов, обновить их можно при параметре: `force=True`.

---

## Логирование исключений и переменных

```python
x, y = 4, 0
logging.info(f"The values of x and y are {x} and {y}")
try:
    result = x / y
    logging.info(f"x/y successful with result: {x/y}.")
except ZeroDivisionError:
    logging.error("Ошибка деления на ноль")
```


---

## Пользовательские логгеры, хендлеры и форматтеры

Пример модульного логгера:

```python
# module_a.py
import logging
# получение пользовательского логгера и установка уровня логирования
logger = logging.getLogger(__name__)
logger.setLevel(logging.INFO)
# настройка обработчика и форматировщика в соответствии с нашими нуждами
handler = logging.FileHandler(f"{__name__}.log", mode='w')
# также есть другие обработкчик — StreamHandler, HTTPHandler, SMTPHandler
formatter = logging.Formatter('%(name)s %(asctime)s %(levelname)s: %(message)s')
# добавление форматировщика к обработчику 
handler.setFormatter(formatter)
# добавление обработчика к логгеру
logger.addHandler(handler)

def foo():
    logger.info("Запуск foo")
    try:
        1 / 0
    except Exception:
        logger.error("Ошибка в foo")
```

---

## Интеграция с Sentry

Sentry — система мониторинга ошибок. Легко интегрируется с `logging`:

```bash
pip install sentry-sdk
```

```python
import sentry_sdk

sentry_sdk.init(
    dsn="<your-dsn-key-here>",
    traces_sample_rate=0.85,
)
```

Теперь ошибки и исключения будут автоматически отправляться в Sentry.

---

## Практические советы

1. Используйте **адекватный уровень логирования** (в продакшене чаще всего `WARNING` и выше).
2. Настраивайте логгеры для **каждого модуля**.
3. Используйте **единый формат логов** по проекту (с timestamp).
4. Включайте **контекст** (переменные, состояние, traceback).
5. Настраивайте **ротацию логов**.
6. В продакшене используйте интеграцию с внешними системами (например, Sentry).

---

## Заключение

Модуль `logging` — мощный инструмент, позволяющий отлаживать, поддерживать и контролировать работу приложений. Грамотное логирование повышает качество сопровождения кода и снижает время на поиск ошибок.

